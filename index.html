<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>Predictor Pro v151 - Data Miner</title>
    <style>
        :root { --p: #00ff88; --bg: #0d1117; --card: #161b22; --border: #30363d; --txt: #ffffff; --gold: #f1c40f; --live: #ff3e3e; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--txt); padding: 10px; margin: 0; }
        .league-group { background: #000; border: 1px solid var(--border); border-radius: 15px; margin-bottom: 20px; padding: 10px; }
        .league-title { color: var(--gold); font-weight: 900; padding: 10px; border-bottom: 1px solid var(--border); text-transform: uppercase; }
        .match-card { background: var(--card); margin: 8px 0; padding: 15px; border-radius: 12px; border-left: 5px solid var(--border); cursor: pointer; }
        .match-card.live { border-left-color: var(--live); }
        
        #analysisPanel { display: none; background: #000; border: 2px solid var(--p); border-radius: 20px; padding: 20px; position: sticky; top: 10px; z-index: 1000; box-shadow: 0 0 50px #000; }
        .stats-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0; }
        .stat-item { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; text-align: center; border: 1px solid #333; }
        
        .live-intel-box { background: rgba(255, 62, 62, 0.1); border: 1px dashed var(--live); padding: 15px; border-radius: 12px; margin-top: 15px; }
        .advice-tag { background: var(--p); color: #000; font-weight: 900; padding: 5px 10px; border-radius: 5px; display: inline-block; margin-top: 10px; }
    </style>
</head>
<body>

<div id="app">
    <h2 style="text-align:center; color:var(--p);">PREDICTOR PRO v151</h2>
    <button onclick="globalSync()" style="width:100%; padding:15px; background:var(--p); color:#000; font-weight:900; border:none; border-radius:12px; cursor:pointer;">ğŸŒ Î•ÎÎ‘Î¡ÎÎ— ÎšÎ‘Î˜ÎŸÎ›Î™ÎšÎ—Î£ Î‘ÎÎ‘Î›Î¥Î£Î—Î£</button>

    <div id="analysisPanel">
        <span onclick="this.parentElement.style.display='none'" style="float:right; cursor:pointer; color:var(--live); font-weight:900;">âœ• ÎšÎ›Î•Î™Î£Î™ÎœÎŸ</span>
        <h3 id="panelHeader" style="text-align:center; color:var(--gold);"></h3>
        
        <div class="stats-row" id="mainStats"></div>
        
        <div class="live-intel-box" id="liveIntel">
            <b style="color:var(--live);">ğŸ“¡ LIVE DATA MINER:</b>
            <div id="intelComparison" style="margin-top:10px; font-size:0.9rem;"></div>
            <div id="liveBetAdvice"></div>
        </div>
    </div>

    <div id="leaguesContainer" style="margin-top:20px;"></div>
</div>

<script>
const KEY = "956cbd05f9e9bf934df78d9b72d9a3a0";
const LEAGUES = [197, 39, 140, 135, 78, 281, 141, 136]; 
let matchData = {};

async function globalSync() {
    const container = document.getElementById('leaguesContainer');
    container.innerHTML = "<p style='text-align:center;'>Î‘Î½Î¯Ï‡Î½ÎµÏ…ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ ÏƒÎµ ÎµÎ¾Î­Î»Î¹Î¾Î·...</p>";
    const today = new Date().toISOString().split('T')[0];

    for(let id of LEAGUES) {
        const res = await fetch(`https://v3.football.api-sports.io/fixtures?league=${id}&date=${today}&season=2025`, {
            headers: { "x-rapidapi-key": KEY, "x-rapidapi-host": "v3.football.api-sports.io" }
        });
        const d = await res.json();
        if(d.response && d.response.length > 0) renderLeague(d.response);
        await new Promise(r => setTimeout(r, 300));
    }
}

function renderLeague(matches) {
    const container = document.getElementById('leaguesContainer');
    const leagueDiv = document.createElement('div');
    leagueDiv.className = 'league-group';
    leagueDiv.innerHTML = `<div class="league-title">${matches[0].league.name} (${matches[0].league.country})</div>`;

    matches.forEach(m => {
        const isLive = ["1H", "HT", "2H"].includes(m.fixture.status.short);
        const card = document.createElement('div');
        card.className = `match-card ${isLive ? 'live' : ''}`;
        card.onclick = () => showDeepAnalysis(m);
        card.innerHTML = `
            <div style="display:flex; justify-content:space-between; font-weight:800;">
                <span>${m.teams.home.name}</span>
                <span style="color:${isLive ? 'var(--live)' : 'var(--p)'}">${m.goals.home ?? 0} - ${m.goals.away ?? 0}</span>
                <span>${m.teams.away.name}</span>
            </div>
            <div style="font-size:0.7rem; margin-top:5px; opacity:0.6;">
                ${isLive ? 'LIVE ' + m.fixture.status.elapsed + "'" : m.fixture.status.short}
            </div>
        `;
        leagueDiv.appendChild(card);
    });
    container.appendChild(leagueDiv);
}

async function showDeepAnalysis(m) {
    const panel = document.getElementById('analysisPanel');
    panel.style.display = "block";
    document.getElementById('panelHeader').innerText = `${m.teams.home.name} vs ${m.teams.away.name}`;
    
    // API Call Î³Î¹Î± Predictions & Live Stats
    const [predRes, liveRes] = await Promise.all([
        fetch(`https://v3.football.api-sports.io/predictions?fixture=${m.fixture.id}`, { headers: {"x-rapidapi-key": KEY} }),
        fetch(`https://v3.football.api-sports.io/fixtures/statistics?fixture=${m.fixture.id}`, { headers: {"x-rapidapi-key": KEY} })
    ]);
    
    const predData = (await predRes.json()).response[0];
    const liveStats = (await liveRes.json()).response;

    // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Î ÏÎ¿Î²Î»Î­ÏˆÎµÏ‰Î½ (Pre-Match)
    document.getElementById('mainStats').innerHTML = `
        <div class="stat-item"><small>PRE-MATCH OVER 2.5</small><br><b style="color:var(--p)">${predData?.predictions.goals.over || '50'}%</b></div>
        <div class="stat-item"><small>PRE-MATCH BTTS</small><br><b style="color:var(--gold)">${predData?.predictions.percent.btts || '50%'}</b></div>
    `;

    // Î£ÏÎ³ÎºÏÎ¹ÏƒÎ· Live Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
    if(liveStats && liveStats.length > 0) {
        const hStats = liveStats[0].statistics;
        const aStats = liveStats[1].statistics;
        const hShots = hStats.find(s => s.type === "Shots on Goal").value || 0;
        const aShots = aStats.find(s => s.type === "Shots on Goal").value || 0;
        
        document.getElementById('intelComparison').innerHTML = `
            <b>Î¤Î•Î›Î™ÎšÎ•Î£ Î£Î¤ÎŸ Î£Î¤ÎŸÎ§ÎŸ (LIVE):</b> ${hShots} - ${aShots}<br>
            <b>ÎšÎ‘Î¤ÎŸÎ§Î—:</b> ${hStats.find(s => s.type === "Ball Possession").value} - ${aStats.find(s => s.type === "Ball Possession").value}
        `;

        // Î£Ï…Î¼Î²Î¿Ï…Î»Î® Live Betting
        let advice = "";
        const totalGoals = (m.goals.home + m.goals.away);
        if(totalGoals < 1 && (hShots + aShots) > 4 && m.fixture.status.elapsed > 30) {
            advice = "<span class="advice-tag">ğŸ”¥ VALUE: OVER 0.5 Î—ÎœÎ™Î§Î¡ÎŸÎÎŸ - Î Î™Î•Î£Î— Î¥Î Î‘Î¡Î§Î•Î™</span>";
        } else if(totalGoals >= 2 && m.fixture.status.elapsed < 60) {
            advice = "<span class="advice-tag">ğŸš€ TREND: OVER 3.5 - Î‘ÎÎŸÎ™Î§Î¤ÎŸ ÎœÎ‘Î¤Î£</span>";
        } else {
            advice = "<span class="advice-tag" style="background:#444; color:#fff;">Î‘ÎÎ‘ÎœÎŸÎÎ— Î“Î™Î‘ Î•Î¥ÎšÎ‘Î™Î¡Î™Î‘</span>";
        }
        document.getElementById('liveBetAdvice').innerHTML = advice;
    } else {
        document.getElementById('intelComparison').innerText = "Î¤Î¿ Ï€Î±Î¹Ï‡Î½Î¯Î´Î¹ Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¾ÎµÎºÎ¹Î½Î®ÏƒÎµÎ¹ Î® Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ live ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬.";
        document.getElementById('liveBetAdvice').innerHTML = "";
    }
}
</script>
</body>
</html>
