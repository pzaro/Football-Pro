<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Predictor Pro v291 - Full Spec</title>
    <style>
        :root { 
            --p:#00ff88; --bg:#0b0e14; --card:rgba(22, 27, 34, 0.9); --border:#30363d; 
            --txt:#ffffff; --gold:#f1c40f; --cyan:#00d4ff; --value:#bf40bf; --alert:#ff4d4d; 
            --live:#00ff41; --finished:#8b949e;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--txt); margin: 0; padding: 0; font-size: 16px; }
        .container { width: 100%; max-width: 900px; margin: 0 auto; padding: 20px; }

        /* LIVE TICKER */
        .ticker-wrap { width: 100%; background: #000; border-bottom: 1px solid var(--p); overflow: hidden; padding: 10px 0; display: none; }
        .ticker-move { display: inline-block; white-space: nowrap; animation: ticker 45s linear infinite; }
        .ticker-item { display: inline-block; padding: 0 20px; font-weight: 800; font-size: 0.85rem; }
        @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        /* PROGRESS BAR */
        .progress-container { width: 100%; height: 6px; background: #1a1d23; border-radius: 3px; margin-top: 10px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--p); width: 0%; transition: 0.5s; }

        /* MATCH CARD */
        .match-card { background: var(--card); border: 1px solid var(--border); border-radius: 22px; margin-bottom: 15px; cursor: pointer; padding: 18px; position: relative; }
        .value-badge { position: absolute; top: -10px; right: 20px; background: var(--value); color: #fff; padding: 4px 12px; border-radius: 10px; font-size: 0.7rem; font-weight: 900; box-shadow: 0 4px 10px rgba(191,64,191,0.4); }
        .time-rem { font-size: 0.7rem; color: var(--cyan); font-weight: 800; }

        /* AUTH */
        #authScreen { position: fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:9999; display:flex; justify-content:center; align-items:center; }
        .auth-input { width: 220px; padding: 15px; border-radius: 12px; border: 2px solid var(--border); background: #000; color: var(--p); font-size: 1.5rem; text-align: center; letter-spacing: 5px; }

        /* PANELS */
        #intelPanel { display: none; background: var(--bg); position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10000; overflow-y: auto; padding: 20px; }
        .btn-close { background: var(--alert); color: #fff; padding: 12px 25px; border-radius: 12px; border: none; font-weight: 900; cursor: pointer; }
        .clean-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .clean-table td { padding: 12px; border-bottom: 1px solid var(--border); text-align: center; font-weight: 700; }

        .btn-sync { width: 100%; padding: 20px; background: var(--p); color: #000; border: none; border-radius: 15px; font-weight: 900; margin-bottom: 20px; cursor: pointer; }
        .acca-item { background: rgba(0,0,0,0.4); padding: 15px; margin-bottom: 10px; border-radius: 12px; display: flex; justify-content: space-between; cursor: pointer; border: 1px solid #333; }
    </style>
</head>
<body>

<div id="authScreen">
    <input type="password" id="pinInput" class="auth-input" maxlength="6" placeholder="PIN" oninput="autoCheck()">
</div>

<div id="appContent" style="display:none;">
    <div class="ticker-wrap" id="liveTickerWrap"><div class="ticker-move" id="tickerContent"></div></div>
    
    <div class="container">
        <h2 style="text-align:center; color:var(--p);">PREDICTOR PRO <span style="color:#fff">v291</span></h2>
        
        <button id="masterBtn" onclick="globalSync()" class="btn-sync">Œ£Œ•ŒìŒßŒ°ŒüŒùŒôŒ£ŒúŒüŒ£ DATA</button>

        <div id="dashboardTools" style="display:none;">
            <div style="display:grid; grid-template-columns:1fr 1fr 0.6fr; gap:8px; margin-bottom:20px;">
                <select id="accaMarket" style="padding:12px; border-radius:10px; background:#000; color:#fff; border:1px solid #444;"><option value="1X2">Œ£ŒóŒúŒïŒôŒë</option><option value="CORNERS">ŒöŒüŒ°ŒùŒïŒ°</option></select>
                <select id="accaSize" style="padding:12px; border-radius:10px; background:#000; color:#fff; border:1px solid #444;"><option value="3">3-ŒëŒîŒë</option><option value="4">4-ŒëŒîŒë</option><option value="5">5-ŒëŒîŒë</option></select>
                <button onclick="generateAcca()" style="background:var(--value); color:#fff; border-radius:10px; border:none; font-weight:900;">GEN</button>
            </div>
        </div>

        <div id="accaDisplay"></div>
        <div id="matchList"></div>

        <div id="intelPanel">
            <button onclick="this.parentElement.style.display='none'" class="btn-close">Œ†ŒôŒ£Œ©</button>
            <h3 id="mTitle" style="text-align:center; color:var(--gold); margin-top:30px;"></h3>
            <div id="bigScore" style="text-align:center; font-size:3.5rem; font-weight:900;"></div>
            <div id="liveInfo" style="text-align:center; color:var(--cyan); font-weight:800; margin-bottom:20px;"></div>
            <div id="builderBox"></div>
            <table class="clean-table" id="statsTable"></table>
            <div id="algoBox" style="background:rgba(0,255,136,0.05); padding:15px; border-radius:15px;"></div>
        </div>
    </div>
</div>

<script>
const KEY = "956cbd05f9e9bf934df78d9b72d9a3a0";
const LEAGUES = [39, 40, 140, 141, 135, 136, 78, 61, 88, 197, 318, 203, 253];
let masterData = [];

function autoCheck() {
    if(document.getElementById('pinInput').value === "106014") {
        sessionStorage.setItem("p_v291", "ok");
        document.getElementById('authScreen').style.display='none';
        document.getElementById('appContent').style.display='block';
        fetchLiveTicker();
    }
}

async function fetchLiveTicker() {
    const r = await fetch(`https://v3.football.api-sports.io/fixtures?live=all`, {headers:{"x-apisports-key":KEY}});
    const d = await r.json();
    if(d.response?.length > 0) {
        let h = ''; d.response.filter(m => LEAGUES.includes(m.league.id)).forEach(m => {
            h += `<div class="ticker-item">‚óè ${m.fixture.status.elapsed}' ${m.teams.home.name} ${m.goals.home}-${m.goals.away} ${m.teams.away.name}</div>`;
        });
        document.getElementById('tickerContent').innerHTML = h + h;
        document.getElementById('liveTickerWrap').style.display = 'block';
    }
}

async function globalSync() {
    document.getElementById('masterBtn').innerText = "ŒëŒùŒëŒõŒ•Œ£Œó Œ£Œï ŒïŒûŒïŒõŒôŒûŒó...";
    const day = new Date().toISOString().split('T')[0];
    const fR = await fetch(`https://v3.football.api-sports.io/fixtures?date=${day}`, {headers:{"x-apisports-key":KEY}});
    const fD = await fR.json();
    const filtered = fD.response.filter(m => LEAGUES.includes(m.league.id));
    
    for(let m of filtered) {
        const pR = await fetch(`https://v3.football.api-sports.io/predictions?fixture=${m.fixture.id}`, {headers:{"x-apisports-key":KEY}});
        const pD = (await pR.json()).response?.[0];
        if(pD) masterData.push({ fixture:m, prediction:pD });
    }
    document.getElementById('dashboardTools').style.display='block';
    renderMatches();
}

function renderMatches() {
    const list = document.getElementById('matchList'); list.innerHTML = "";
    masterData.forEach(d => {
        const p = d.prediction; const m = d.fixture;
        const isLive = ['1H','2H','HT'].includes(m.fixture.status.short);
        const elapsed = m.fixture.status.elapsed || 0;
        const rem = 90 - elapsed;
        const isValue = Math.max(parseInt(p.predictions.percent.home), parseInt(p.predictions.percent.away)) > 70;

        const card = document.createElement('div');
        card.className = "match-card";
        card.onclick = () => openIntel(m.fixture.id);
        card.innerHTML = `
            ${isValue ? '<div class="value-badge">VALUE BET</div>' : ''}
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <div style="font-weight:900;">${m.teams.home.name}<br>${m.teams.away.name}</div>
                <div style="text-align:right;">
                    <div style="font-size:1.5rem; font-weight:900;">${m.goals.home ?? '-'}:${m.goals.away ?? '-'}</div>
                    ${isLive ? `<div class="time-rem">Œ•œÄœåŒªŒøŒπœÄŒø: ${rem>0?rem:0}'</div>` : ''}
                </div>
            </div>
            <div class="progress-container"><div class="progress-bar" style="width:${(elapsed/90)*100}%"></div></div>
        `;
        list.appendChild(card);
    });
}

function openIntel(id) {
    const d = masterData.find(x => x.fixture.fixture.id === id); if(!d) return;
    const p = d.prediction; const m = d.fixture;
    document.getElementById('intelPanel').style.display='block';
    document.getElementById('mTitle').innerText = `${m.teams.home.name} - ${m.teams.away.name}`;
    document.getElementById('bigScore').innerText = `${m.goals.home ?? '-'}-${m.goals.away ?? '-'}`;
    
    const hXG = parseFloat(p.teams.home.last_5.goals.for.average);
    const aXG = parseFloat(p.teams.away.last_5.goals.for.average);
    const totXG = (hXG + aXG).toFixed(2);

    document.getElementById('liveInfo').innerText = `Status: ${m.fixture.status.long} | Total xG: ${totXG}`;
    
    let builder = '';
    if(totXG > 1.9) builder = `<div style="background:var(--cyan); color:#000; padding:10px; border-radius:10px; font-weight:900; margin-bottom:15px;">üî• BET BUILDER: Over 1.5 Goals & ${p.predictions.winner.name}</div>`;
    document.getElementById('builderBox').innerHTML = builder;

    document.getElementById('statsTable').innerHTML = `
        <tr><td>xG Attack</td><td>${hXG}</td><td>${aXG}</td></tr>
        <tr><td>Win Prob</td><td>${p.predictions.percent.home}</td><td>${p.predictions.percent.away}</td></tr>
    `;
    window.scrollTo(0,0);
}

function generateAcca() {
    const s = parseInt(document.getElementById('accaSize').value);
    const pool = masterData.slice(0, s);
    let h = `<div style="background:rgba(191,64,191,0.1); border:1px solid var(--value); padding:15px; border-radius:15px; margin-bottom:20px;">`;
    pool.forEach(i => {
        h += `<div class="acca-item" onclick="openIntel(${i.fixture.fixture.id})">
            <span>${i.fixture.teams.home.name}</span>
            <b style="color:var(--gold)">${i.prediction.predictions.winner.name}</b>
        </div>`;
    });
    h += `</div>`;
    document.getElementById('accaDisplay').innerHTML = h;
}
</script>
</body>
</html>
